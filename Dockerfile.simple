# Dockerfile simplificado sin n8n para builds m치s r치pidos
FROM node:20-alpine

WORKDIR /app

# Copiar archivos de dependencias
COPY package*.json ./

# Instalar solo dependencias de producci칩n (sin n8n)
RUN npm install --omit=dev --ignore-scripts

# Instalar tsx globalmente
RUN npm install -g tsx

# Copiar c칩digo fuente
COPY server ./server
COPY tsconfig*.json ./

# Copiar frontend compilado
COPY dist ./dist

# Exponer puerto
EXPOSE 3000

# Comando de inicio
CMD ["tsx", "server/index.ts"]
